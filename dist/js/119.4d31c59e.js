"use strict";(self["webpackChunkadmin2"]=self["webpackChunkadmin2"]||[]).push([[119],{7119:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("div",{staticClass:"top_content"},[t("div",{staticClass:"top_left"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addButton}},[e._v(" 新增 ")])],1),t("div",{staticClass:"top_right"},[t("el-input",{staticClass:"custom_input",attrs:{placeholder:"请输入姓名查询"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.searchName("s")}}},[e._v(" 搜索 ")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.searchName("c")}}},[e._v(" 重置 ")])],1)]),t("el-dialog",{attrs:{title:"新增",visible:e.dialogVisible,width:"750px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px"}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"年龄",prop:"age"}},[t("el-input",{model:{value:e.ruleForm.age,callback:function(t){e.$set(e.ruleForm,"age",e._n(t))},expression:"ruleForm.age"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"性别",prop:"gender"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别"},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}},[t("el-option",{attrs:{label:"男",value:1}}),t("el-option",{attrs:{label:"女",value:0}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"出生日期",prop:"date1"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date1,callback:function(t){e.$set(e.ruleForm,"date1",t)},expression:"ruleForm.date1"}})],1)],1)],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.quxiao("ruleForm")}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),t("div",{staticClass:"bottom_content"},[t("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData,height:"650"}},[t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"150"}}),t("el-table-column",{attrs:{prop:"age",label:"年龄",width:"150"}}),t("el-table-column",{attrs:{prop:"gender",label:"性别",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(a.row.gender?"男":"女"))])]}}])}),t("el-table-column",{attrs:{prop:"date1",label:"注册日期",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.formatDate(new Date(a.row.date1))))])]}}])}),t("el-table-column",{attrs:{prop:"address",label:"地址"}}),t("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"SuperAdmin",expression:"'SuperAdmin'"}],attrs:{size:"small"},on:{click:function(t){return e.editClick(a.row)}}},[e._v("编辑")]),t("span",{staticStyle:{margin:"0 8px"}}),t("el-popconfirm",{attrs:{title:"确定要删除吗？",confirmButtonText:"确定",cancelButtonText:"取消"},on:{confirm:function(t){return e.handleDelete(a.row)}}},[t("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"SuperAdmin",expression:"'SuperAdmin'"}],attrs:{slot:"reference",type:"danger",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.oagination.page,"page-sizes":[10,20,50,100],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:e.oagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},l=[],s=a(7138);function i(e){return(0,s.Z)({url:"/user/tableData",method:"post",data:e})}function o(e){return(0,s.Z)({url:"/user/deleteTableData",method:"post",data:e})}function n(e){return(0,s.Z)({url:"/mall/add",method:"post",data:e})}var u={mounted(){this.getTableData()},data(){return{oagination:{page:1,limit:10,total:0},searchInput:"",tableData:[],dialogVisible:!1,ruleForm:{name:"",gender:"",date1:"",address:"",age:""},rules:{name:[{required:!0,validator:this.nameProp,trigger:"blur"}],gender:[{required:!0,validator:this.genderProp,trigger:"change"}],date1:[{required:!0,validator:this.date1Prop,trigger:"blur"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"}],age:[{required:!0,message:"年龄不能为空",trigger:"blur"},{type:"number",message:"年龄必须为数字值",trigger:"blur"}]}}},methods:{handleSizeChange(e){this.oagination.limit=e,this.getTableData()},handleCurrentChange(e){this.oagination.page=e,this.getTableData()},searchName(e){"c"==e&&(this.searchInput=""),i({page:this.oagination.page,limit:this.oagination.limit,searchName:this.searchInput}).then((e=>{200==e.data.code&&(this.tableData=e.data.data.arr)}))},quxiao(e){this.dialogVisible=!1,this.resetForm(e)},handleDelete(e){o({ids:e.id}).then((e=>{200==e.data.code&&(this.$message({message:"删除成功",type:"success"}),this.getTableData())}))},formatDate(e){const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${r}`},submitForm(e){this.$refs[e].validate((t=>{if(!t)return!1;n(this.ruleForm).then((t=>{200==t.data.code&&(this.$message({message:t.data.message,type:"success"}),this.dialogVisible=!1,this.getTableData(),this.resetForm(e))}))}))},resetForm(e){this.ruleForm={name:null,gender:null,date1:null,address:null,age:null},this.$refs[e].resetFields()},date1Prop(e,t,a){""===t?a(new Error("请选择出生日期")):a()},nameProp(e,t,a){let r=/^(?:[\u4e00-\u9fa5·]{2,16})$/;""===t?a(new Error("请输入活动名称")):r.test(t)?a():a(new Error("请输入正确的姓名格式"))},genderProp(e,t,a){""===t?a(new Error("请选择性别")):a()},addButton(){this.dialogVisible=!0},handleClose(e){this.$confirm("确认关闭？").then((t=>{this.resetForm("ruleForm"),e()})).catch((e=>{}))},getTableData(){i({page:this.oagination.page,limit:this.oagination.limit}).then((e=>{200==e.data.code&&(this.tableData=e.data.data.arr,this.oagination.total=e.data.data.total)}))},editClick(e){this.ruleForm={...e},this.dialogVisible=!0}}},d=u,c=a(1001),m=(0,c.Z)(d,r,l,!1,null,"bd19522e",null),p=m.exports}}]);
//# sourceMappingURL=119.4d31c59e.js.map